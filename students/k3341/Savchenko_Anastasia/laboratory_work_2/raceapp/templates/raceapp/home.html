{% extends 'base.html' %}
{% load static %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞{% endblock %}

{% block content %}
<!-- –ì–µ—Ä–æ–π-—Å–µ–∫—Ü–∏—è -->
<div class="jumbotron bg-dark text-white rounded p-5 mb-5 shadow">
    <h1 class="display-4">üèÅ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ RaceTab!</h1>
    <p class="lead">–¢–∞–±–ª–æ –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π –∞–≤—Ç–æ–≥–æ–Ω–æ–∫. –°–ª–µ–¥–∏—Ç–µ –∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏, —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ –≥–æ–Ω–∫–∏ –∏ –æ—Å—Ç–∞–≤–ª—è–π—Ç–µ
        –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.</p>
    <hr class="my-4 bg-light">
    <p>–°–∞–º—ã–µ –ø—Ä–µ—Å—Ç–∏–∂–Ω—ã–µ –≥–æ–Ω–∫–∏ –º–∏—Ä–∞ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ. –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ —Å–æ–æ–±—â–µ—Å—Ç–≤—É –≥–æ–Ω—â–∏–∫–æ–≤!</p>

    <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
    <div class="d-flex flex-wrap gap-3 mt-4">
        {% if not user.is_authenticated %}
        <a class="btn btn-primary btn-lg px-4" href="{% url 'raceapp:register' %}" role="button">
            <i class="bi bi-person-plus"></i> –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
        </a>
        <a class="btn btn-outline-light btn-lg px-4" href="{% url 'raceapp:login' %}" role="button">
            <i class="bi bi-box-arrow-in-right"></i> –í–æ–π—Ç–∏
        </a>
        {% endif %}
        <a class="btn btn-success btn-lg px-4" href="{% url 'raceapp:race_list' %}" role="button">
            <i class="bi bi-speedometer2"></i> –°–º–æ—Ç—Ä–µ—Ç—å –≥–æ–Ω–∫–∏
        </a>
    </div>
</div>

<!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã -->
<h2 class="page-title mb-4">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã</h2>
<div class="row mb-5">
    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –≥–æ–Ω–æ–∫ -->
    {% if total_races > 0 %}
    <div class="col-md-4 mb-3">
        <div class="card stats-card text-center shadow gradient-primary">
            <div class="card-body">
                <i class="bi bi-flag display-4 mb-3"></i>
                <h2 class="display-6">{{ total_races }}</h2>
                <p class="card-text">–ì–æ–Ω–æ–∫ –≤ —Å–∏—Å—Ç–µ–º–µ</p>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ -->
    {% if total_racers > 0 %}
    <div class="col-md-4 mb-3">
        <div class="card stats-card text-center shadow gradient-success">
            <div class="card-body">
                <i class="bi bi-person display-4 mb-3"></i>
                <h2 class="display-6">{{ total_racers }}</h2>
                <p class="card-text">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</p>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ -->
    {% if total_comments > 0 %}
    <div class="col-md-4 mb-3">
        <div class="card stats-card text-center shadow gradient-info">
            <div class="card-body">
                <i class="bi bi-chat-left-text display-4 mb-3"></i>
                <h2 class="display-6">{{ total_comments }}</h2>
                <p class="card-text">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤</p>
            </div>
        </div>
    </div>
    {% endif %}
</div>

<!-- –ï—Å–ª–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—É—Å—Ç–∞—è -->
{% if total_races == 0 or total_racers == 0 or total_comments == 0 %}
<div class="alert alert-info mb-4">
    <i class="bi bi-info-circle"></i>
    –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –î–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å.
</div>
{% endif %}

<!-- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã -->
<h2 class="page-title mb-4">–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã</h2>
<div class="row mt-4">
    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –≥–æ–Ω–æ–∫ -->
    <div class="col-md-4 mb-4">
        <div class="card race-card h-100 shadow">
            <div class="card-body text-center">
                <div class="icon-wrapper mb-3">
                    <i class="bi bi-flag-fill display-4 text-primary"></i>
                </div>
                <h3 class="card-title">–ì–æ–Ω–∫–∏</h3>
                <p class="card-text">–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö –∏ –ø—Ä–æ—à–µ–¥—à–∏—Ö –∞–≤—Ç–æ–≥–æ–Ω–∫–∞—Ö. –î–µ—Ç–∞–ª—å–Ω–∞—è
                    –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, —É—á–∞—Å—Ç–Ω–∏–∫–∏.</p>
                <a href="{% url 'raceapp:race_list' %}" class="btn btn-outline-primary mt-2">–ü–µ—Ä–µ–π—Ç–∏</a>
            </div>
        </div>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
    <div class="col-md-4 mb-4">
        <div class="card race-card h-100 shadow">
            <div class="card-body text-center">
                <div class="icon-wrapper mb-3">
                    <i class="bi bi-person-plus-fill display-4 text-success"></i>
                </div>
                <h3 class="card-title">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
                <p class="card-text">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∫–∞–∫ —É—á–∞—Å—Ç–Ω–∏–∫ –∞–≤—Ç–æ–≥–æ–Ω–æ–∫. –£–∫–∞–∂–∏—Ç–µ —Å–≤–æ–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å, –æ–ø—ã—Ç –∏ –∫–æ–º–∞–Ω–¥—É.
                    –£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º–∏ –∑–∞—è–≤–∫–∞–º–∏.</p>
                <a href="{% url 'raceapp:racer_register' %}" class="btn btn-outline-success mt-2">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
            </div>
        </div>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ -->
    <div class="col-md-4 mb-4">
        <div class="card race-card h-100 shadow">
            <div class="card-body text-center">
                <div class="icon-wrapper mb-3">
                    <i class="bi bi-chat-dots-fill display-4 text-warning"></i>
                </div>
                <h3 class="card-title">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h3>
                <p class="card-text">–û—Å—Ç–∞–≤–ª—è–π—Ç–µ –æ—Ç–∑—ã–≤—ã –∏ –∑–∞–¥–∞–≤–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã –æ –≥–æ–Ω–∫–∞—Ö. –û–±—Å—É–∂–¥–∞–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –¥–µ–ª–∏—Ç–µ—Å—å
                    –º–Ω–µ–Ω–∏—è–º–∏ —Å —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º.</p>
                <a href="{% url 'raceapp:comment_list' %}" class="btn btn-outline-warning mt-2">–û–±—Å—É–¥–∏—Ç—å</a>
            </div>
        </div>
    </div>
</div>

<!-- –ë–ª–∏–∂–∞–π—à–∏–µ –≥–æ–Ω–∫–∏ -->
<h2 class="page-title mt-5 mb-4">–ë–ª–∏–∂–∞–π—à–∏–µ –≥–æ–Ω–∫–∏</h2>
<div class="row">
    {% for race in upcoming_races|slice:":3" %}
    <div class="col-md-4 mb-4">
        <div class="card race-card h-100 shadow">
            <div class="card-header bg-dark text-white">
                <h5 class="mb-0">{{ race.name }}</h5>
            </div>
            <div class="card-body">
                <p class="card-text">{{ race.description|truncatewords:20 }}</p>
                <p class="card-text">
                    <i class="bi bi-calendar text-primary"></i> {{ race.date|date:"d.m.Y" }}<br>
                    <i class="bi bi-geo-alt text-danger"></i> {{ race.location }}
                </p>
                <a href="{% url 'raceapp:race_detail' race.pk %}" class="btn btn-primary btn-sm">
                    <i class="bi bi-info-circle"></i> –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                </a>
            </div>
        </div>
    </div>
    {% empty %}
    <!-- –ï—Å–ª–∏ –Ω–µ—Ç –±–ª–∏–∂–∞–π—à–∏—Ö –≥–æ–Ω–æ–∫ -->
    <div class="col-12">
        <div class="alert alert-info text-center">
            <i class="bi bi-info-circle me-2"></i>
            –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–ª–∏–∂–∞–π—à–∏—Ö –≥–æ–Ω–∫–∞—Ö –ø–æ—è–≤–∏—Ç—Å—è –ø–æ–∑–∂–µ.
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}