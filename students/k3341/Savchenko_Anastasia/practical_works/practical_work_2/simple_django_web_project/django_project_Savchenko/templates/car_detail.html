<!DOCTYPE html>
<html>
<head>
    <title>{{ car.brand }} {{ car.model }}</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        h1 {
            color: #333;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
        }
        .car-info {
            background: #f9f9f9;
            border: 1px solid #ddd;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        .owners-section, .history-section {
            background: #f9f9f9;
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        h2 {
            color: #4CAF50;
            margin-top: 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        table, th, td {
            border: 1px solid #ddd;
        }
        th, td {
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #4CAF50;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .btn {
            display: inline-block;
            padding: 8px 15px;
            margin-right: 10px;
            text-decoration: none;
            border-radius: 5px;
            color: white;
            font-weight: bold;
        }
        .btn-edit {
            background: #4CAF50;
        }
        .btn-delete {
            background: #f44336;
        }
        .btn-back {
            background: #2196F3;
        }
        .btn-list {
            background: #FF9800;
        }
        .btn-home {
            background: #9C27B0;
        }
        .btn:hover {
            opacity: 0.8;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .no-data {
            color: #666;
            font-style: italic;
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        li {
            margin-bottom: 5px;
        }
        a {
            color: #2196F3;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        .actions {
            margin-top: 30px;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 8px;
            text-align: center;
        }
        .warning-text {
            color: #f44336;
            font-size: 14px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>{{ car.brand }} {{ car.model }}</h1>

    <div class="car-info">
        <p><strong>–ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π –Ω–æ–º–µ—Ä:</strong> {{ car.state_number }}</p>
        <p><strong>–ú–∞—Ä–∫–∞:</strong> {{ car.brand }}</p>
        <p><strong>–ú–æ–¥–µ–ª—å:</strong> {{ car.model }}</p>
        <p><strong>–¶–≤–µ—Ç:</strong> {{ car.color|default:"–Ω–µ —É–∫–∞–∑–∞–Ω" }}</p>
        <p><strong>ID –∞–≤—Ç–æ–º–æ–±–∏–ª—è:</strong> {{ car.id_car }}</p>
    </div>

    {% if owners %}
    <div class="owners-section">
        <h2>–í—Å–µ –≤–ª–∞–¥–µ–ª—å—Ü—ã (–∑–∞ –≤—Å—ë –≤—Ä–µ–º—è)</h2>
        <ul>
            {% for owner in owners %}
            <li>
                <a href="/owner/{{ owner.id_owner }}/">
                    {{ owner.last_name }} {{ owner.first_name }}
                </a>
                (ID: {{ owner.id_owner }})
            </li>
            {% endfor %}
        </ul>
    </div>
    {% else %}
    <div class="owners-section">
        <h2>–í—Å–µ –≤–ª–∞–¥–µ–ª—å—Ü—ã (–∑–∞ –≤—Å—ë –≤—Ä–µ–º—è)</h2>
        <p class="no-data">–ù–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤</p>
    </div>
    {% endif %}

    {% if ownerships %}
    <div class="history-section">
        <h2>–ò—Å—Ç–æ—Ä–∏—è –≤–ª–∞–¥–µ–Ω–∏—è</h2>
        <table>
            <thead>
                <tr>
                    <th>–í–ª–∞–¥–µ–ª–µ—Ü</th>
                    <th>–ù–∞—á–∞–ª–æ –≤–ª–∞–¥–µ–Ω–∏—è</th>
                    <th>–û–∫–æ–Ω—á–∞–Ω–∏–µ –≤–ª–∞–¥–µ–Ω–∏—è</th>
                </tr>
            </thead>
            <tbody>
                {% for ownership in ownerships %}
                <tr>
                    <td>
                        <a href="/owner/{{ ownership.id_owner.id_owner }}/">
                            {{ ownership.id_owner.last_name }} {{ ownership.id_owner.first_name }}
                        </a>
                    </td>
                    <td>{{ ownership.start_date|date:"d.m.Y" }}</td>
                    <td>
                        {% if ownership.end_date %}
                            {{ ownership.end_date|date:"d.m.Y" }}
                        {% else %}
                            –ü–æ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="history-section">
        <h2>–ò—Å—Ç–æ—Ä–∏—è –≤–ª–∞–¥–µ–Ω–∏—è</h2>
        <p class="no-data">–ù–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ –≤–ª–∞–¥–µ–Ω–∏—è</p>
    </div>
    {% endif %}

    <!-- –ë–ª–æ–∫ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –¥–µ–π—Å—Ç–≤–∏–π - –û–ë–ù–û–í–õ–ï–ù–ù–´–ô -->
    <div class="actions">
        <p><strong>–î–µ–π—Å—Ç–≤–∏—è —Å –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–º:</strong></p>

        <a class="btn btn-edit" href="/car/{{ car.id_car }}/update/">
            ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
        </a>

        <a class="btn btn-delete" href="/car/{{ car.id_car }}/delete/">
            üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª—å
        </a>

        <a class="btn btn-list" href="/cars/">
            üìã –í—Å–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏
        </a>

        <a class="btn btn-home" href="/">
            üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é
        </a>

        <div class="warning-text">
            –í–Ω–∏–º–∞–Ω–∏–µ: –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è —Ç–∞–∫–∂–µ —É–¥–∞–ª–∏—Ç—Å—è –≤—Å—è –∏—Å—Ç–æ—Ä–∏—è –≤–ª–∞–¥–µ–Ω–∏—è –∏–º!
        </div>
    </div>
</body>
</html>